在Fragment中使用ViewPager,然后在ViewPager中又使用Fragment
最近在做一个项目,要求用到多层次的TAB,首先是首页有三个TAB,这三个TAB的内容都是Fragment,
分别为:
FragmentA 没有子TAB
FragmentB 有三个TAB,里面有一个ViewPager,这个ViewPager管理着三个FragmentB_1,FragmentB_2,FragmentB_3
FragmetnC 没有子TAB

在应用刚启动时,三个一级TAB都能正常显示,包括生命周期的回调,界面的显示
但是在切换到FragmentB之后,切换到FragmentC或者FragmentA,这时再切换到FragmentB时,显示的内容为一片空白,但是如果你在FragmentB中滑动时,你会发现能滑动,即ViewPager里面还是有数据的,而且也能走回调方法,只是ViewPager里面的三个Fragment不显示而已,即ViewPager的PagerAdapter没有走getItem方法,看情况是因为PagerAdapter的FragmentManager保存了FragmentB_1,FragmentB_2FragmentB_3三个界面的状态了,所以没有重新走生成方法,该怎么办呢?
仔细看看代码,原来在实例化ViewPager的Adapter时传进去的参数是getFragmentManager(),而其实在Fragment里面管理Fragment时,应该传递的数据是getChildFragmentManager().当我把参数修改完成之后,运行应用,FragmentB里面的Framgnt经过多次切换之后仍能正常显示,异常解决了.